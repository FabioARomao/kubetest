apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: nginx-grafana-ingress
  annotations:
   kubernetes.io/ingress.class: nginx
   cert-manager.io/cluster-issuer: letsencrypt-prod
   nginx.ingress.kubernetes.io/backend-protocol: HTTPS
spec:
   tls:
     - hosts:
          - grafana.testing.com
       secretName: tls-grafana
rules:
- host: grafana.testing.com
  http:
       paths:
       - path: /
         pathType: Prefix
         backend:
           service:
             name: grafana-grafana
             port:
                number: 5601